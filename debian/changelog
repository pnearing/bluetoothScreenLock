bluetooth-screen-lock (0.1.19-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Autostart writes: explicitly chmod final .desktop to 0644 after atomic
    replace or DesktopEntry.write() to negate umask surprises; keep consistent
    with config/log handling.
  * Autostart Exec wrapping: stop string-hacking and use pyxdg DesktopEntry
    to parse/update Exec where available; fallback path minimally rewrites only
    Exec=. Insert startup delay using a token-preserving wrapper so field codes
    (e.g. %u/%f) expand correctly:
      /bin/sh -c 'sleep D; exec "$0" "$@"' ORIGINAL_ARGS...
  * Autostart generation: when creating a new entry (no user applications
    desktop found), build the .desktop via pyxdg when available to ensure
    correct key formatting; fallback to manual text with the same keys.
  * Settings/monitor: add optional "Allow name matching when MAC unavailable"
    toggle. When enabled and only a device name is set, monitoring is allowed
    with name-based matching; default remains MAC-based for reliability.
    Update tray warning/banner text to reflect the toggle's state.
  * Bump upstream version to 0.1.19.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 15:21:03 -0400

bluetooth-screen-lock (0.1.18-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Drop systemd autostart from packaging and documentation.
  * postrm: remove legacy user systemd unit if present.
  * Update docs to GNOME autostart via .desktop only.
  * Bump upstream version to 0.1.18.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 12:01:49 -0400

bluetooth-screen-lock (0.1.17-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Bump upstream version to 0.1.17.
  * Add man page for bluetooth-screen-lock command.
  * Add Near Command timeout and kill grace settings.
  * Settings: reorganize Preferences into Notebook tabs (General, Near Command, Advanced).
  * Move all Near Command options to a dedicated tab; add "Execution" and "Timing" headers.
  * Wire near command timeout and kill grace through Settings; persist and apply in app.
  * Keep existing behaviors and tooltips; general polish with clearer grouping.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 10:19:30 -0400

bluetooth-screen-lock (0.1.16-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Sync versions with GitHub build: bump to 0.1.16.
  * No functional changes beyond 0.1.15: settings warning on shell toggle and
    'Learn more' button retained.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 09:43:05 -0400

bluetooth-screen-lock (0.1.15-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Settings: show immediate one-time warning when enabling 'Run command in shell'
    and add a 'Learn more' button next to it. Persist the warned flag; retain a
    save-time fallback dialog for migration cases.
  * Bump upstream version to 0.1.15.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 09:20:44 -0400

bluetooth-screen-lock (0.1.14-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Add GTK About dialog to tray menu, showing app logo, version, license,
    authors, and project website.
  * Bump upstream version to 0.1.14 and sync packaging.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 08:49:33 -0400

bluetooth-screen-lock (0.1.13-1) unstable; urgency=medium

  [ Peter Nearing ]
  * login1 unlock monitoring: when GetSessionByPID fails (e.g., app menu
    launch without a session association), attempt GetSession using
    XDG_SESSION_ID; otherwise, skip login1 monitoring quietly.
  * Reduce log noise: downgrade exceptions to warnings for expected
    NoSessionForPID/fallback failures; primary ScreenSaver-based unlock
    monitoring remains unchanged.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 08:13:41 -0400

bluetooth-screen-lock (0.1.12-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Harden autostart delay wrapper to avoid PATH-dependent tools.
    Use absolute /bin/sh and /bin/sleep, resolve base64 with shutil.which
    and require an absolute path; gracefully fall back to no delay if
    base64 is unavailable. Eliminates PATH ambiguity at login.
  * DBus calls: set finite default timeouts (3000ms) in _dbus_call() and
    _dbus_call_reply() to prevent indefinite hangs if a DBus service stalls.
    Remove explicit -1 (infinite) call-site usages so new defaults apply.
  * Privacy: Redact MAC addresses in BLE detection logs in monitor to avoid
    logging full device addresses at INFO/DEBUG; use _redact_mac helper.
  * Autostart writes: fsync the directory after atomic os.replace() to ensure
    the rename is durable across crashes/power loss.

 -- Peter Nearing <me@peternearing.ca>  Sun, 17 Aug 2025 08:00:57 -0400

bluetooth-screen-lock (0.1.11-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Bump upstream version to 0.1.11.
  * Fix typing for Python 3.13: use Callable[[], None] for on_away.
  * Prepare release via GitHub Actions workflow.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 16:34:58 -0400

bluetooth-screen-lock (0.1.10-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Add --debug CLI flag to force DEBUG logging (overrides LOG_LEVEL).
  * Harden file operations for autostart/config via dirfd-anchored, atomic writes.
  * Safer near_command execution: no PATH lookup, require absolute non-symlink executables.
  * Prefer session-scoped DBus screen lock methods; add scoped loginctl fallback.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 15:54:47 -0400

bluetooth-screen-lock (0.1.9-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Bump upstream version to 0.1.9; prepare release.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 12:57:18 -0400

bluetooth-screen-lock (0.1.8-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Bump upstream version to 0.1.8; improve CI release workflow (Debian orig
    tarball creation, build-deps in GH Actions).

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 12:07:49 -0400

bluetooth-screen-lock (0.1.7-2) unstable; urgency=medium

  [ Peter Nearing ]
  * Packaging: install launcher to /usr/bin and include Python sources
    under /usr/share/bluetooth-screen-lock so desktop entry Exec works.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 11:21:16 -0400

bluetooth-screen-lock (0.1.7-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Several vulnerabilities fixed.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 11:13:23 -0400

bluetooth-screen-lock (0.1.6-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Add "Scan interval (sec)" setting with tooltip in GTK Settings window.
  * Plumb scan_interval_sec through config and apply immediately to monitor.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 10:32:05 -0400

bluetooth-screen-lock (0.1.5-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Bump version to 0.1.5-1 and rebuild package.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 10:00:05 -0400

bluetooth-screen-lock (0.1.4-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Add tray menu toggle to enable/disable automatic screen locking.
  * Persist toggle in config and reflect state in status text.
  * Skip auto-lock on AWAY when disabled; keep manual "Lock now" working.

 -- Peter Nearing <me@peternearing.ca>  Sat, 16 Aug 2025 09:38:31 -0400

bluetooth-screen-lock (0.1.3-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Switch launcher to `python3 -m bluetooth_screen_lock` and add __main__.py.
  * Use set -eu and safe PYTHONPATH quoting in launcher script.
  * Add unified __version__ exported from the package.
  * Autostart fallback prefers module execution over run.py.

 -- Peter Nearing <me@peternearing.ca>  Fri, 15 Aug 2025 21:09:06 -0400

bluetooth-screen-lock (0.1.2-2) unstable; urgency=medium

  [ Peter Nearing ]
  * Update app icon and add 1024x1024 hicolor asset. Regenerate all
    sizes to comply with icon theme guidelines.

 -- Peter Nearing <me@peternearing.ca>  Fri, 15 Aug 2025 18:51:37 -0400

bluetooth-screen-lock (0.1.2-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Fix icon installation paths to prevent creating a directory named
    "bluetooth-screen-lock.png" under hicolor, ensuring icons are
    discoverable by GNOME/GTK.

 -- Peter Nearing <me@peternearing.ca>  Fri, 15 Aug 2025 11:10:00 -0400

bluetooth-screen-lock (0.1.1-1) unstable; urgency=medium

  [ Peter Nearing ]
  * Bump version to 0.1.1.
  * Add live RSSI monitoring and multi-resolution app icons.

 -- Peter Nearing <me@peternearing.ca>  Thu, 14 Aug 2025 10:53:44 -0400

bluetooth-screen-lock (0.1.0-1) unstable; urgency=medium

  * Initial release: GTK tray app to lock screen based on Bluetooth RSSI proximity.

 -- Peter Nearing <me@peternearing.ca>  Wed, 13 Aug 2025 11:25:00 -0400
